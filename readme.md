## Traefik 2.2 

Traefik 2.2 - это Edge Router с [открытым исходным кодом](https://github.com/containous/traefik), который делает публикацию услуг легкой. Он получает запросы от вашей системы и выясняет, какие компоненты отвечают за их обработку. Что отличает Traefik, помимо его многочисленных функций, так это то, что он автоматически находит правильную конфигурацию для ваших услуг. 

## Развертывание 

Последовательность действий я рассказываю так, как это делал я. Вариаций развертывания очень много, мой пример один из них

1. Настраиваем доменную запись на текущий docker-хост - 
добавляем DNS запись 
```
    *.mysite.com - 10.11.12.13
```
Это позволит в дальнейшем присваивать сервисам в контейнерах доменные имена вида `https://service.mysite.com`

где, 10.11.12.13 - внешний IP адрес хоста с traefik

2. Открываем порты 80 и 443 на прослушивание

3. Генерируем пароль доступа в админку traefik2 командой:

```
    echo $(htpasswd -nbB admin "SECRETPASSWORD") | sed -e s/\\$/\\$\\$/g
```

3. создаем файл .env рядом с docker-compose и определяем в нем переменные: 

```
LEVEL_DEBUG=DEBUG
ROOT_EMAIL=<ЭЛЕКТРОННАЯ_ПОЧТА_АДМИНИСТРАТОРА>
TRAEFIK_HOST_RULE=Host(`traefik.mysite.com`)
# echo $(htpasswd -nbB admin "dpVyMM7RuPdO") | sed -e s/\\$/\\$\\$/g
TRAEFIK_AUTH=admin:$$2y$$05$$tMqmJlTbBB3n3Ajd82E2L.L9u83htt30TEzofStSkrFfl1t1ppt56

```
сохраняем файл

6. Если ранее не создавалась виртуальная сеть proxy, то создаем ее командой командой:
```
    docker network create proxy
```

5. Запускаем docker-compose командой:
```
docker-compose up -d
```

6. При правильной настройке админка traefik 2.2 должна быть доступна по адресу `https://traefik.mysite.com`